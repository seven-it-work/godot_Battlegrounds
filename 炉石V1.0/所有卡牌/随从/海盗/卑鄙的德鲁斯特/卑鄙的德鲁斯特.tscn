[gd_scene load_steps=2 format=3 uid="uid://1nun1sava7o5"]

[sub_resource type="GDScript" id="GDScript_drust"]
script/source = "extends BaseMinion

func 信号绑定():
	if !player.操作中添加卡片信号.is_connected(_on_有牌入手):
		player.操作中添加卡片信号.connect(_on_有牌入手)

func _on_有牌入手(d:CardEntity, cardPosition:Enums.CardPosition, index:int):
	if 卡片所在位置 != Enums.CardPosition.战场:
		return
	if cardPosition!=Enums.CardPosition.手牌:
		return
	# 检查是否是海盗牌
	if d is BaseMinion and Enums.CardRace.海盗 in d.race:
		# 使你的随从获得+1/+2，金色随从改为+2/+3
		var 友方随从 = player.获取战场上的牌().filter(func(item): return item is BaseMinion)
		
		for 随从 in 友方随从:
			var 加成值 = Vector2i(1, 2)
			if 随从.is_gold:
				加成值 = Vector2i(2, 3)
			
			var 加成 = AttributeBonus.build(名称, 加成值, 名称)
			随从.属性加成(加成, !player.是否在战斗中())
		
		print(\"卑鄙的德鲁斯特：获取海盗牌，所有随从获得加成\")
"

[node name="卑鄙的德鲁斯特" type="Node"]
script = SubResource("GDScript_drust")
race = Array[int]([5])
atk_hp = Vector2i(6, 4)
lushi_id = 119992
str_id = "BG32_234"
"名称" = "卑鄙的德鲁斯特"
"描述" = "每当你获取一张海盗牌，使你的随从获得+1/+2，金色随从改为+2/+3。"
"glod_描述" = "每当你获取一张海盗牌，使你的随从获得+2/+4，金色随从改为+4/+6。"
"等级" = 6
"花费" = 6
metadata/_custom_type_script = "uid://d1rstpchmbfdi"
