[gd_scene load_steps=2 format=3 uid="uid://bwtokpvj8kv0"]

[sub_resource type="GDScript" id="GDScript_corruptor"]
script/source = "extends BaseMinion

func 获取描述(dic:Dictionary={})->String:
	var 倍率 = 获取倍率()
	var tempDic={
		\"atk\"=1 * 倍率,
		\"hp\"=1 * 倍率,
	}
	tempDic.merged(dic,true)
	return super.获取描述(tempDic)

func 信号绑定():
	if !player.英雄受伤信号.is_connected(_on_hero_damaged):
		player.英雄受伤信号.connect(_on_hero_damaged)

func _on_hero_damaged(伤害值: int):
	if 卡片所在位置!=Enums.CardPosition.战场:
		return
	# 回溯该伤害（恢复英雄生命值）
	player.生命值+=伤害值
	
	# 使酒馆中的随从在本回合中获得+1/+1（金色版本+2/+2）
	var 倍率 = 获取倍率()
	var 加成值 = Vector2i(1 * 倍率, 1 * 倍率)
	
	# 给酒馆中的随从添加临时属性加成
	for 随从 in player.酒馆:
		if 随从 is BaseMinion:
			随从.属性加成(AttributeBonus.build(
				名称,
				加成值,
				名称
			), false)  # 临时属性
	
	print(\"灰烬腐蚀者：回溯 \", 伤害值, \" 点伤害，酒馆随从获得+\", 加成值.x, \"/+\", 加成值.y)
"

[node name="灰烬腐蚀者" type="Node"]
script = SubResource("GDScript_corruptor")
race = Array[int]([2])
atk_hp = Vector2i(6, 6)
lushi_id = 121687
str_id = "BG32_873"
"名称" = "灰烬腐蚀者"
"描述" = "在你的英雄受到伤害后，回溯该伤害并使酒馆中的随从在本回合中获得+{0}/+{1}。"
"等级" = 5
"花费" = 5
metadata/_custom_type_script = "uid://bfiw5rjm0riy2"
