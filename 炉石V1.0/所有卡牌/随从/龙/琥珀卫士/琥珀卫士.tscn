[gd_scene load_steps=2 format=3 uid="uid://r2n7c0e8m1ksp"]

[sub_resource type="GDScript" id="GDScript_amberguardian"]
resource_name = "琥珀卫士"
script/source = "extends BaseMinion

func 战斗开始时():
	if 卡片所在位置 != Enums.CardPosition.战场:
		return
	var 列表:Array = player.获取战场上的牌()
	# 过滤出其他友方的龙
	var 其他龙:Array = 列表.filter(func(m:BaseMinion): return m != self and (Enums.CardRace.龙 in m.race))
	if 其他龙.is_empty():
		return
	var 目标列表:Array = []
	if 获取倍率() == 1:
		目标列表.append(其他龙.pick_random())
	else:
		# 金卡对两条其他龙
		if 其他龙.size() == 1:
			目标列表.append(其他龙[0])
		else:
			# 随机两条不重复
			var temp = 其他龙.duplicate()
			var a = temp.pick_random()
			temp.erase(a)
			var b = temp.pick_random()
			目标列表.append(a)
			if b:
				目标列表.append(b)
	var 加成 = AttributeBonus.build('琥珀卫士', Vector2i(2,2), str(lushi_id))
	for 目标 in 目标列表:
		(目标 as BaseMinion).属性加成(加成, false)
		(目标 as BaseMinion).圣盾 = true
"

[node name="琥珀卫士" type="Node"]
script = SubResource("GDScript_amberguardian")
race = Array[int]([3])
atk_hp = Vector2i(3, 2)
lushi_id = 95006
str_id = "BG24_500"
"名称" = "琥珀卫士"
"描述" = "[b]战斗开始时：[/b]使另一条友方的龙获得+2/+2和[b]圣盾[/b]。"
"glod_描述" = "[b]战斗开始时：[/b]使两条其他友方的龙获得+2/+2和[b]圣盾[/b]。"
"等级" = 3
metadata/_custom_type_script = "uid://d1rstpchmbfdi"



