[gd_scene load_steps=2 format=3 uid="uid://b5x464niotexu"]

[ext_resource type="Script" uid="uid://d1rstpchmbfdi" path="res://所有卡牌/随从/BaseMinion.gd" id="1_fanatic"]

[node name="烟火狂热者" type="Node"]
script = ExtResource("1_fanatic")
race = Array[int]([0])
atk_hp = Vector2i(5, 5)
RegularGameExclusive = true
lushi_id = 101562
str_id = "BG25_922"
"名称" = "烟火狂热者"
"描述" = "每当你获取一个你已有的随从，使你的随从获得+2/+2。"
"glod_描述" = "每当你获取一个你已有的随从，使你的随从获得+4/+4。"
"等级" = 4
metadata/_custom_type_script = "uid://d1rstpchmbfdi"

[sub_resource type="GDScript" id="GDScript_1"]
script/source = "extends BaseMinion

func 信号绑定():
	player.操作中添加卡片信号.connect(_on_操作中添加卡片)

func _on_操作中添加卡片(添加卡牌: CardEntity, cardPosition: Enums.CardPosition, index: int):
	if 卡片所在位置 != Enums.CardPosition.战场:
		return
	if cardPosition != Enums.CardPosition.手牌:
		return
	if not (添加卡牌 is BaseMinion):
		return
	# Check if we already have this minion type
	var existing_minions = player.获取战场上的牌().filter(func(m): return m is BaseMinion and (m as BaseMinion).名称 == (添加卡牌 as BaseMinion).名称)
	if existing_minions.size() > 0:
		_buff_all_minions()

func _buff_all_minions():
	var buff_value: int = 2 * 获取倍率() # +2/+2 for normal, +4/+4 for golden
	var buff_vector: Vector2i = Vector2i(buff_value, buff_value)
	var all_minions = player.获取战场上的牌()
	for minion in all_minions:
		if minion is BaseMinion:
			var 加成 = AttributeBonus.build(
				'烟火狂热者加成',
				buff_vector,
				str(lushi_id)
			)
			(minion as BaseMinion).属性加成(加成, true) # Permanent buff
"
